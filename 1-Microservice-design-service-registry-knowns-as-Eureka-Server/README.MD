# Refer image from images folder i.e Microservice_Architecture.png
# Microservice are nothing but we are developing several rest api, API-1,API-2...API-4 , they are belong to one project, API-1 communicate with API-2 still they are of same project known as Interservice communication sometime our api will communicate with 3rd party api also that is called external service communication, all api will communicate with same database or different it depends on requirement whether api connect to same/different database along with that we have service registry and API Gateway .
# what is the purpose of service registry :- Service registry is used to register all api's or service available to our application. Service registry is also an API's In spring boot we can use Eureka Server as Service Registry. Eureka server is one of the netflix library provided by spring cloud in that netflix library Eureka server is one component.Instead of writing security logic to all the api's we are going to use API Gateway. what is API Gateway:- Api Gateway manage all the api available in the application.API Gateway is going to act as front Gate for all the api's. Here Zuul Proxy act as API Gateway. When request come from UI , it go to API Gateway, Now API Gateway will decide whether to process this request or not by using Request filtering then API Gateway will talk to Service Registry then service registry talk to backend api. Backend api may will they have interservice communication or external service communication and they may connect with single database or multiple database.Is this fixed architecture for microservice.Ans:- No This is Generalized architecture which is follow by most of the people.
# we already know how to develop api in microservice we will learn to develop service registry or API Gateway.

# Service Registry:- The api which is going to  maintain api's details.The api which maintain the other api's details known as service registry.We are using eureka server as registry service. or service registry is the application which is used to register all the rest api available in our project.which one we are using as a service registry.in our application ? Eureka server is using as a service registry. Who will provide the Eureka server ?Ans:-  Spring cloud netflix library provide Eureka server which we are using as a service registry for our application.In short we can say that Eureka server is a component inside spring cloud netflix library or we can say that Eureka server provide by spring cloud netflix library. To enable eureka server for our application  we use annotation @EnableEurekaServer

# For run this project :- http://localhost:8761

# The application which is registered with eureka server known as Eureka Client.

# Note:- Eureka sever itself register to service registry as client , do you want same application register itself as client ? Ans:- We should not register same application as client which act as eureka server or service registry. To do that we need to add below configuration in yml file.
eureka:
client:
register-with-eureka: false
# above property telling that don't register yourself with eureka you act as service registry don't act as client


# suppose user send a request to  REST-API-1 now REST-API-1 communicate with REST-API-2 inter-communication can be perform by 3 ways:-
# 1. restTemplate 2. webclient 3. feign client, To communicate with REST-API-2 we need url of REST-API-2 and give this hardcode url to restTemplate & webclient, but suppose REST-API-02 is deployed by cluster on multiple server which leads to multiple url to access REST API  but in rest template and webclient we can configure only one url to restTemplate or webclient.So when you are going to talk to inter-services restTemplate and webclient are recommended or not ? Ans:- Not recommended, Tomorrow my rest api is deploying on multiple server then multiple url will come if i go to the restclient or webclient always i send the request to only one url but my application is deploying on 3 different server and 3 different url are available thats why for inter-service communication we use Feign client.To achieve inter-service communication with dynamic url, we are going to use a concept called Feign client

# We can do interservice communication by 3 way but what is the problem ?:- if our rest api is deployed on more than one server in that case our program is hard-code the only one url but actually rest api is running more than one url it means it running on more than one server due to load balancing concept.if we use only when url of restapi in webclient/rest template in that case burden is on one server to reduce the burden we are running the rest-api is more than one server to distribute the load but resttemplate and webclient will talk to only one server by using hard-coded url.To avoid that problem feign client came into picture. Now i am create feign client  to REST-API-O1 which is used to access REST-API=02, Now for this feign client i will not configure any url directly for the feign client i configure the application name i.e which application i want to access  that application name i will configure for the feign client. what will the feign client will do ?Feign client will go to service registry and will identify the what is the url of the given service based on that url it will going to make a request.

# Q:- Am i am giving the url of the REST-API-02 to the feign client ? or feign client will get the rest-API-02 get the url from the service registry based on the application name? Ans:- feign client will get the url of the REST-API-02 based on the application name from the service registry.Tomorrow if you are running your rest api on 3 server am i hardcode the url or feign client will get the url on dynamically.Ans:- Dynamically it will get the url from service registry.

# Q:- Diff between webclient and feign client ?:- if you go for webclient you need to hard-code the url or you need to configure the url of your endpoint/application.Only one url you can configure but when you go for feign client yo no need to configure the url , you just tell which application you want to access, that application is already register with eureka, feign client will go to eureka/service-registry and get the url of the application based on the application name to achieve the communication this is called inter-service communciation. whenever you go inter-service communication by feign client loosely coupling is their.among the services. if the restapi url change or rest api is running on multiple server , feign client will get the url dynamically from the service registry. 

# feign client is one of the component given by spring cloud netflix library which is used to achieve inter-service communication. if we use feign client to achieve inter-service communication our application will be loosely coupled no need to hard code the url to achieve the communication , url will be available into the  service-registry , feign client will get the url from the service registry based on the name of the application. 